# 堆与栈的内存比较

LNK：[【54】【Cherno C++】【中字】C++的堆与栈内存的比较_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1CK4y1n7N2/?spm_id_from=pageDriver)

基本原理在[数组.md](数组.md)、[栈作用域生存期.md](栈作用域生存期.md)和[创建并初始化C++对象.md](创建并初始化C++对象.md)讲的很清楚了.

附加如下：

**堆分配**，是一堆事情，包括询问新的内存来扩充数据等，潜在时间成本很大.

**栈分配**，像一条cpu指令，因为他的分配就是在一条线上的.



所以推荐的**分配策略**是：

为了**更高的性能**，你应该**尽量在栈上分配内存**.

除非**所需内存太大**或**所需作用域更大**，才采取**堆分配**.